(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1528:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),a(3395),a(3658),a(5866);var r=a(3191),s=a(8716),n=a(7922),o=a.n(n),i=a(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3395)),"/home/lnin80/Project5.3/src/app/page.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,3658)),"/home/lnin80/Project5.3/src/app/layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/lnin80/Project5.3/src/app/page.jsx"],m="/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4769:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},1301:()=>{},1804:(e,t,a)=>{Promise.resolve().then(a.bind(a,4172))},8472:()=>{},1596:(e,t,a)=>{"use strict";a(8472);var r=a(7577),s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),n="undefined"!=typeof process&&process.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(){function e(e){var t=void 0===e?{}:e,a=t.name,r=void 0===a?"stylesheet":a,s=t.optimizeForSpeed,i=void 0===s?n:s;l(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",l("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,a){return"number"==typeof a?e._serverSheet.cssRules[a]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),a},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return l(o(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var a=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!a.cssRules[e])return e;a.deleteRule(e);try{a.insertRule(t,e)}catch(r){n||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),a.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,a){t&&l(o(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return a?s.insertBefore(r,a):s.appendChild(r),r},function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,a=e.length;a;)t=33*t^e.charCodeAt(--a);return t>>>0},c={};function m(e,t){if(!t)return"jsx-"+e;var a=String(t),r=e+a;return c[r]||(c[r]="jsx-"+d(e+"-"+a)),c[r]}function u(e,t){var a=e+(t=t.replace(/\/style/gi,"\\/style"));return c[a]||(c[a]=t.replace(/__jsx-style-dynamic-selector/g,e)),c[a]}var h=r.createContext(null);h.displayName="StyleSheetContext",s.default.useInsertionEffect||s.default.useLayoutEffect;var f=void 0;function x(e){var t=f||r.useContext(h);return t&&t.add(e),null}x.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},t.style=x},7626:(e,t,a)=>{"use strict";e.exports=a(1596).style},4172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(326),s=a(7626),n=a.n(s),o=a(7577),i=a.n(o);let l=function(){let[e,t]=i().useState(new Date),[a,s]=i().useState(!1),[o,l]=i().useState(!1),[d,c]=i().useState("Sed"),[m,u]=i().useState(!1),[h,f]=i().useState(!1),[x,p]=i().useState(null),[g,y]=i().useState({}),[b,w]=i().useState("columns"),[v,k]=i().useState(!1),[S,j]=i().useState(null),[_,D]=i().useState([]),[N,M]=i().useState(!1),P=["January","February","March","April","May","June","July","August","September","October","November","December"],C={"odmor-godisnji":"#ff9966","odmor-bolovanje":"#4a9eff","odmor-slobodan-dan":"#67e8f9",work:"#10b981",meeting:"#8b5cf6",personal:"#f43f5e",islamic:"#fbbf24"},R=async()=>{try{f(!0);let e=await fetch("/api/get-all-schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();console.log("Fetched schedules:",t),t.schedules?D(t.schedules):console.error("No schedules found in response:",t)}catch(e){console.error("Error fetching schedules:",e)}finally{f(!1)}},z=(e=>{let t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=t.getDay()||7;r=1===r?0:r-1;let s=new Date(t);s.setDate(s.getDate()-r);let n=new Date(a),o=7-n.getDay();0!==n.getDay()&&n.setDate(n.getDate()+o);let i=[],l=new Date(s);for(;l<=n;){let t=[];for(let a=0;a<7;a++)t.push({day:l.getDate(),date:new Date(l),isPreviousMonth:l.getMonth()<e.getMonth()||11===l.getMonth()&&0===e.getMonth(),isNextMonth:l.getMonth()>e.getMonth()||0===l.getMonth()&&11===e.getMonth()}),l.setDate(l.getDate()+1);i.push(t)}return i})(e),F=async(e=!1)=>{f(!0),p(null);try{if(await new Promise(e=>setTimeout(e,1e3)),e){let e=new Date(Date.now()+18144e5).toDateString();y(t=>({...t,[e]:[{id:"7",text:"Conference",category:"work",time:"9:00 AM - 5:00 PM"}]}))}}catch(e){p("Failed to load events. Please try again.")}finally{f(!1)}},E=(e,t)=>!!_&&0!==_.length&&_.some(a=>a.week_start_date===e&&a.week_end_date===t),J=async(e,t,a)=>{console.log("handleWeekClick called with:",e,t,a);let r=t.toISOString().split("T")[0],s=a.toISOString().split("T")[0];if(E(r,s)){M(!0);try{console.log("Fetching schedule for:",r,s);let t=await fetch("/api/get-schedule-by-week-dates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:r,endDate:s})}),a=await t.json();console.log("Schedule data received:",a),a.error?console.error("Failed to fetch schedule:",a.error):(j({month:a.scheduleInfo.month,year:a.scheduleInfo.year,dateRange:a.scheduleInfo.date_range,schedule:a.schedule,weekNumber:e,weekStartDate:r,weekEndDate:s}),k(!0))}catch(e){console.error("Error fetching schedule:",e)}finally{M(!1)}}},T=async e=>{try{M(!0);let t=await fetch("/api/update-schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scheduleId:e.scheduleId,weekNumber:e.weekNumber,year:e.year,weekStartDate:e.weekStartDate,weekEndDate:e.weekEndDate,dateRange:e.dateRange,schedule:e.schedule})}),a=await t.json();a.success?(console.log("Schedule updated successfully:",a),k(!1),R()):console.error("Failed to update schedule:",a.message)}catch(e){console.error("Error updating schedule:",e)}finally{M(!1)}},A=o||m;if(v&&S){let e=_.map(e=>({weekNumber:e.week_number,year:e.year,dateRange:e.date_range}));return r.jsx("div",{className:"min-h-screen font-inter p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col overflow-y-auto bg-[#121214]",children:(0,r.jsxs)("div",{className:"w-full max-w-[99%] mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:["Schedule for Week ",S.weekNumber," (",S.dateRange,")"]}),(0,r.jsxs)("button",{onClick:()=>{k(!1)},className:"bg-[#1D1D1F] hover:bg-[#2a2a2a] text-[#67e8f9] px-4 py-2 rounded-lg flex items-center",children:[r.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Calendar"]})]}),r.jsx(BinBinWithSingleHeader,{operators:["John Doe","Jane Smith","Mark Johnson"],data:S.schedule||[{date:"01.01",day:"P",shifts:[{time:"08.00-16.00",operators:{"M58-J-467":"John Doe","M53-E-929":"Jane Smith","A35-J-924":""}},{time:"20.00-04.00",operators:{"M58-J-467":"","M53-E-929":"Mark Johnson","A35-J-924":""}}]},{date:"02.01",day:"U",shifts:[{time:"08.00-16.00",operators:{"M58-J-467":"Jane Smith","M53-E-929":"","A35-J-924":"John Doe"}},{time:"20.00-04.00",operators:{"M58-J-467":"Mark Johnson","M53-E-929":"","A35-J-924":""}}]}],availableWeeks:e,initialWeek:{weekNumber:S.weekNumber,year:S.year,dateRange:S.dateRange},onSave:e=>{console.log("Saving schedule data:",e),T({...S,schedule:e})},onWeekChange:e=>{console.log("Week changed:",e);let t=_.find(t=>t.week_number===e.weekNumber&&t.year===e.year);if(t){let a=new Date(t.week_start_date),r=new Date(t.week_end_date);J(e.weekNumber,a,r)}}})]})})}return(0,r.jsxs)("div",{style:{backgroundImage:"url('https://ucarecdn.com/220aeb18-08cb-4769-a57d-b8bbb8f89791/-/format/auto/')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",maxHeight:"100vh"},className:"jsx-77009c86862f3707 min-h-screen font-inter p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col overflow-y-auto",children:[N&&r.jsx("div",{className:"jsx-77009c86862f3707 fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:r.jsx("div",{className:"jsx-77009c86862f3707 animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#67e8f9]"})}),(0,r.jsxs)("div",{className:"jsx-77009c86862f3707 w-full max-w-[99%] mx-auto rounded-xl px-1 py-[6px] sm:p-1 md:py-2 md:px-1 lg:py-3 lg:px-2 shadow-2xl mt-1 sm:mt-2 md:mt-3",children:[r.jsx(CalHeader,{currentDate:e,setCurrentDate:t,setShowMonthPicker:s,navigateMonth:a=>{let r=new Date(e);r.setMonth(r.getMonth()+a),t(r)},monthNames:P,selectedIcon:b,setSelectedIcon:w,toggleMiniCalendar:()=>l(!o),showMiniCalendar:o,events:g,categoryColors:C}),r.jsx("div",{className:"jsx-77009c86862f3707 my-2 sm:my-2.5 md:my-3 overflow-x-auto",children:r.jsx("div",{className:"jsx-77009c86862f3707 min-w-[320px] w-full",children:r.jsx(CalGrid1,{weeks:z,dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],buttonText:d,handleDayClick:(e,t)=>{console.log("Day clicked:",t)},handleWeekClick:J,events:g,currentDate:e,categoryColors:C,getISOWeekNumber:e=>{let t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);let a=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-a.getTime())/864e5-3+(a.getDay()+6)%7)/7)}})})}),r.jsx("div",{className:"jsx-77009c86862f3707 mt-2 sm:mt-2.5 md:mt-3",children:r.jsx(CalFooter,{showEvents:m,setShowEvents:u,loading:h,fetchEvents:F,error:x,events:g,handleDeleteEvent:e=>{let t={};Object.entries(g).forEach(([a,r])=>{let s=r.filter(t=>t.id!==e);s.length>0&&(t[a]=s)}),y(t)},categoryColors:C})})]}),a&&r.jsx("div",{onClick:()=>s(!1),className:"jsx-77009c86862f3707 fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-77009c86862f3707 bg-[#1D1D1F] rounded-lg p-3 sm:p-4 w-[280px] sm:w-[320px] md:w-[360px] max-w-[90vw]",children:[r.jsx("h3",{className:"jsx-77009c86862f3707 text-white text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Select Month"}),r.jsx("div",{className:"jsx-77009c86862f3707 grid grid-cols-3 gap-1 sm:gap-2",children:P.map((a,n)=>r.jsx("button",{onClick:()=>{let a=new Date(e);a.setMonth(n),t(a),s(!1)},className:"jsx-77009c86862f3707 bg-[#2A2A2A] hover:bg-[#3A3A3A] text-white text-xs sm:text-sm py-1.5 sm:py-2 rounded transition-colors",children:a},a))})]})}),o&&r.jsx("div",{className:"jsx-77009c86862f3707 mt-4",children:r.jsx("div",{className:"jsx-77009c86862f3707 bg-[#1a1a1a] rounded-lg p-2 border border-[#2a2a2a]",children:r.jsx(MiniCalendars,{currentDate:e,events:g,categoryColors:C})})}),A&&r.jsx("div",{className:"jsx-77009c86862f3707 pb-20"}),r.jsx(n(),{id:"77009c86862f3707",children:"@-webkit-keyframes vibrate{0%{-webkit-transform:translatex(0);transform:translatex(0)}25%{-webkit-transform:translatex(.5px);transform:translatex(.5px)}50%{-webkit-transform:translatex(0);transform:translatex(0)}75%{-webkit-transform:translatex(-.5px);transform:translatex(-.5px)}100%{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes vibrate{0%{-moz-transform:translatex(0);transform:translatex(0)}25%{-moz-transform:translatex(.5px);transform:translatex(.5px)}50%{-moz-transform:translatex(0);transform:translatex(0)}75%{-moz-transform:translatex(-.5px);transform:translatex(-.5px)}100%{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes vibrate{0%{-o-transform:translatex(0);transform:translatex(0)}25%{-o-transform:translatex(.5px);transform:translatex(.5px)}50%{-o-transform:translatex(0);transform:translatex(0)}75%{-o-transform:translatex(-.5px);transform:translatex(-.5px)}100%{-o-transform:translatex(0);transform:translatex(0)}}@keyframes vibrate{0%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}25%{-webkit-transform:translatex(.5px);-moz-transform:translatex(.5px);-o-transform:translatex(.5px);transform:translatex(.5px)}50%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}75%{-webkit-transform:translatex(-.5px);-moz-transform:translatex(-.5px);-o-transform:translatex(-.5px);transform:translatex(-.5px)}100%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.vibrate{-webkit-animation:vibrate.3s infinite;-moz-animation:vibrate.3s infinite;-o-animation:vibrate.3s infinite;animation:vibrate.3s infinite}@-webkit-keyframes fade-in{from{opacity:0}to{opacity:1}}@-moz-keyframes fade-in{from{opacity:0}to{opacity:1}}@-o-keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes fade-in{from{opacity:0}to{opacity:1}}.animate-fade-in{-webkit-animation:fade-in.3s ease-in-out;-moz-animation:fade-in.3s ease-in-out;-o-animation:fade-in.3s ease-in-out;animation:fade-in.3s ease-in-out}@-webkit-keyframes slide-right{from{width:0}to{width:100%}}@-moz-keyframes slide-right{from{width:0}to{width:100%}}@-o-keyframes slide-right{from{width:0}to{width:100%}}@keyframes slide-right{from{width:0}to{width:100%}}@-webkit-keyframes slide-left{from{width:100%}to{width:0}}@-moz-keyframes slide-left{from{width:100%}to{width:0}}@-o-keyframes slide-left{from{width:100%}to{width:0}}@keyframes slide-left{from{width:100%}to{width:0}}.slide-right{-webkit-animation:slide-right.3s ease-in-out;-moz-animation:slide-right.3s ease-in-out;-o-animation:slide-right.3s ease-in-out;animation:slide-right.3s ease-in-out}.slide-left{-webkit-animation:slide-left.3s ease-in-out;-moz-animation:slide-left.3s ease-in-out;-o-animation:slide-left.3s ease-in-out;animation:slide-left.3s ease-in-out}html,body{height:100%;overflow:auto}"})]})}},3658:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(9510);function s({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:e})})}a(5023)},3395:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/home/lnin80/Project5.3/src/app/page.jsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[819],()=>a(1528));module.exports=r})();